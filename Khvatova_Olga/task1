#include <stdio.h>  
#include <math.h> 

typedef long long int Rub;


struct Person {
    Rub capital;
    Rub salary;
};

struct Person Bob;  // buy house
struct Person Alice;


void bob_salary(int year, int month)
{
    if (month == 1) Bob.salary *= 1.10;    

    if (month != 6)  // June -- no salary, days off.
        Bob.capital += Bob.salary;
}


void simulation()
{
    int month = 11;
    int year = 2023;
    
    while( !(month == 9 & year == 2053) ) {
        bob_salary(year, month);
        bob_food(year, month);
        bob_mortgage_payment();
        bob_house(year, month);

        alice_salary();
        alice_food();

        month++;
        if (month == 13) {
            month = 1;
            year++;
        }
    }
}




int main()
{
    bob_init();
    alice_init();

    simulation();

    print();

    
    int start = 1000000; //Начальный капитал
    float kvar = 20000000; //Стоимость квартиры вначале
    float vklad = 11; // % по вкладу
    float ipoteka = 7; // % по ипотеке
    int year = 30; // количество лет в опыте
    int months = 12; // месяцев в опыте
    float zp = 200000; // зарплата
    float rent = 30000; // съем квартиры
    float rashod = 30000; //  расходы ежемесячные
    float inf = 7; // % инфляции
    /////////////////////


    //считаем сумму платежа Боба
    int S = kvar - start; // Сумма кредита
    float r = (ipoteka / 100) / 12; // Месячная ставка
    int n = year * 12; // Кол-во месяцев во всем сроке кредита
    float result = pow((1 + r), (float)n); // Возводим (1+r) в степень n
    float plata = S * ((r * result) / (result - 1)); // Сумма ежемесячного платежа по ипотеке по формуле
    /////////////////////

    
    // считаем капитал Элис
    float zp_Alice = zp;
    float rashod_Alice = rashod;
    float ost_Alice;
    float schet_Alice = start; // Элис положила стартовый капитал на вклад

    for (int i = 1; i <= year; i++) { // Счетчик лет        
        for (int j = 1; j <= months; j++) { // Счетчик месяцев в каждом годе
            ost_Alice = zp_Alice - (rent + rashod_Alice); // Элис оплатила расходы

            if ( j != 6 ) {  // June -- no salary
                schet_Alice = schet_Alice + ost_Alice; // Счет Элис пополнился остатком зарплаты
            }
            
            schet_Alice = schet_Alice * (1 + (vklad / 100) / 12); // Начисляем в конце месяца проценты по вкладу
        }
        zp_Alice = zp_Alice * (1 + (inf / 100)); // ЗП увеличилась на инфляцию
        rashod_Alice = rashod_Alice * (1 + (inf / 100)); // расходы увеличились на инфляцию
        rent = rent * (1 + (inf / 100)); // рента увеличилась на инфляцию
    }
    /////////////////////
        

    // В этом блоке идет расчет капитала Боба
    float zp_Bob = zp;
    float rashod_Bob = rashod;
    float ost_Bob;
    float schet_Bob = 0; // Стартовый капитал на первоначальный взнос по ипотеке

    for (int i = 1; i <= year; i++) { // Счетчик лет
        for (int j = 1; j <= months; j++) { // Счетчик месяцев в каждом годе
            ost_Bob = zp_Bob - (plata + rashod_Bob); // Боб оплатил расходы и заплатил платеж по ипотеке
            schet_Bob = (schet_Bob + ost_Bob); // Счет Боба пополнился остатком зарплаты
            schet_Bob = schet_Bob * (1 + (vklad / 100) / 12); // Начисляем в конце месяца проценты по вкладу
        }
        zp_Bob = zp_Bob * (1 + (inf / 100)); // ЗП увеличилась на инфляцию
        rashod_Bob = rashod_Bob * (1 + (inf / 100)); // расходы увеличились на инфляцию
        kvar = kvar * (1 + (inf / 100)); // Инфляция на недвижимость
    }
    schet_Bob = schet_Bob + kvar;
    /////////////////////


    //  результаты
    printf("Alice:                                 %.0f rub.\n", schet_Alice);
    printf("Bob:                                   %.0f rub. \n", schet_Bob);
    printf("Stoimost kvartiri na konec perioda:    %.0f rub. \n", kvar);
    printf("Velichina platega po ipoteke:          %.0f rub. \n", plata);
    /////////////////////
  
    getchar();getchar(); // Ждем символ, чтобы консоль не закрывалась автоматически
    return 0; // Если дошло до этого момента, то возвращаем 0
    
}
